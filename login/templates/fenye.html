<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.min.js"></script>
    <script src="http://cdn.bootcss.com/typeahead.js/0.11.1/typeahead.bundle.js"></script>
    <link href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.css" rel="stylesheet">
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
<div class="col-sm-3">
    <section class="panel">
        <div class="panel-heading">
            Search By:
        </div>
        <br>
        <div class="nav search-row" id="top_menu">
            <!--  search start -->

            <a>Protein names:</a><br>
            <input id="protein_name" placeholder="Protein names" type="text">
            <br><br>
            <a>Protein uniprot id:</a><br>
            <input id="uniprot_id" placeholder="Protein uniprot id" type="text">
            <br>
            <input type="text" value="Amsterdam,Washington,Sydney,Beijing,Cairo" data-role="tagsinput">
            <br><br><br>

            <input type="button" id="btn" value="search" onclick="search">
            <!--  search end -->
        </div>
    </section>
</div>
<div class="col-sm-9">
    <section class="panel">
        <div class="panel-heading">
            List
        </div>
        <table class="table table-striped table-advance table-hover" id="proteinTable">
            <tbody>
            <tr>
                <th>uniprot_id</th>
                <th>protein_name</th>
                <th>gene_symbol</th>
                <th>option</th>
            </tr>
            {% for protein in data %}
            <tr>
                <td>{{ protein.uniprot_id }}</td>
                <td>{{ protein.protein_name }}</td>
                <td>{{ protein.gene_symbol }}</td>
                <td>
                    <button data-original-title="Popovers in left"
                            data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                            data-placement="left"
                            data-trigger="hover" class="btn btn-info popovers">Show
                    </button>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="pagination">
    <span class="step-links">
        {% if has_previous %}
            <a id="first_page" onclick="first_page()">&laquo; first</a>
            <a id="previous_page" onclick="previous_page()">previous</a>
        {% endif %}

        <span class="current" id="page_number">
<!--            Page {{ page_number }} of {{ num_pages }}.-->
            Page {{ page_number }}
        </span>

        {% if has_next %}
            <a id="next_page" onclick="next_page()">next</a>
            <a id="last_page" onclick="last_page()">last &raquo;</a>
        {% endif %}
    </span>
        </div>
    </section>
</div>

</body>
</html>
<script type="text/javascript">
    function next_page(){
        {% if has_next %}
            page_num = {{ page_number }} + 1;
        {% endif %}
        var protein_name = document.getElementById('protein_name').value
        var uniprot_id = document.getElementById('uniprot_id').value
        $.ajax({
            type: "GET",
            url: 'http://127.0.0.1:8000/goods_page/' + page_num,
            data: {
                page_num: page_num,
                protein_name: protein_name,
                uniprot_id: uniprot_id,
            },
            success: function (res) {
                data = res.data
                num_pages = res.num_pages
                has_previous = res.has_previous
                has_next = res.has_next
                page_number = res.page_number
                $("#proteinTable").html(data)
                $("#page_number").html(page_number)
                console.log('successfully get result')
            }
        })
    };
</script>